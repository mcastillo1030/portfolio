<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Marlon Castillo">
    <meta name="description" content="A brief tile puzzle game using jQuery scripts for its logic.">
    <link rel="stylesheet" href="game.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Anton|Zilla+Slab:400,400i,700" rel="stylesheet"> 
    <title>Tile Game</title>	
  </head>
  <body>
      <header>
         <nav>
            <a href="../../index.html" id="back-button">Back to Developer Page</a>
          </nav>
          <h1>Tile Puzzle Game</h1>
      </header>
      <main>
         <div id="dashboard">
            <h2>Source Code</h2>
            <div class="container">
               <pre>
$(document).ready(function() {
   var seconds = 0, minutes = 0;
   var time;
   // This variable counts the number of clicks on the tiles.
   var clicks = 0;
   // Array contains all images from puzzle grid
   var images = $("div.tile img").toArray();
   

   // The following code shuffles the images on the page
   // after a five (5) second delay.
   setTimeout(function () {
      // call function to shuffle
      var imgAry = shuff(images.slice());
      for (var i = 0; i &lt; imgAry.length; i++) {
         // put images back on page
         place_back($("div.tile")[i],imgAry[i]);
      }

      // The click event handler for the puzzle tiles. 
      $(".tile").on("click", function(event) {
         clicks++;
         if (clicks == 1) {
           // Start the timer on the first click
           startTimer();
         }

         //get blank image & its index
         var blankImg = $("#blank");
         var blankIndex = $("div.tile img").index(blankImg);
         var blankTile = $("div.tile").get(blankIndex);

         //get current image & its index
         var curIndex = $("div.tile").index(this);
         var curImg = $("div.tile img").get(curIndex);
         
         var adjacent = testAdj(curIndex, blankIndex);

         if (adjacent){
            place_back($(this), blankImg);
            place_back(blankTile, curImg);
         } // end if

         is_solved();   // Check if puzzle is solved
      }); // end click event handler on div of class=tile
   }, 5000);

   // This function tests whether a tile is adjacent to 
   // the blank tile and returns a boolean value to 
   // represent whether a swap is possible.
   function testAdj(cur, blank) {
      var result = false;
      var diff = blank - cur;

      if((cur === 4) || (blank === 4)){
      //if(cur === 4){
         if (diff &lt; 0){
            diff *= -1;
         }

         if((diff === 1) || (diff === 3)){
            result = true;
         }
      }else if(diff === -1){
         if((blank === 0) || (blank === 1) ||
            (blank === 6) || blank === 7){
            result = true;
         }
      }else if (diff === -3){
         if((blank === 0) || (blank === 2) ||
            (blank === 3) || (blank === 5)){
            result = true;
         }
      }else if (diff === 1){
         if((blank === 1) || (blank === 2) ||
            (blank === 7) || (blank === 8)){
            result = true;
         }
      } else if(diff === 3){
         if((blank === 3) || (blank === 5) ||
            (blank === 6) || (blank === 8)){
            result = true;
         }
      }

      return result;
   }

   // This function shuffles an array effectively.
   // This is an adaptation of the Durstenfeld
   // shuffle algorithm.
   function shuff(array) {
      for (var i = array.length - 1; i &gt; 0; i--) {
         var j = Math.floor(Math.random() * (i + 1));
         var temp = array[i];
         array[i] = array[j];
         array[j] = temp;
      }

      return array;
   }

   // This function inserts the DOM object represented by the 
   // parameter obj into the node represented by
   // the parameter into. 
   function place_back(into, obj) {
      into.append(obj);
   }

   // This function handles the timer on the page by updating
   // with the current elapsed time. 
   function startTimer() {
      time = setInterval(function() {
         seconds++;
         if (seconds &gt;= 60) {
            minutes++;
            seconds = 0;
         }
         $("#timer").text(minutes + "m " + seconds + "s");
      }, 1000);
   }

   // This function stop the timer 
   function stopTimer() {
      clearInterval(time);
   }

   // This function checks whether the puzzle
   // has been solved and if it is, prevents any
   // more swaps, then stops the timer. Lastly,
   // it displays results for the current puzzle run.
   function is_solved() {
      var current = $("div.tile img").toArray();
      var count = 0;

      for (var i = 0; i &lt; current.length; i++) {
         if (current[i].outerHTML === images[i].outerHTML) {
            count++;
         }//end nested if
      }// end for

      if (count == current.length) {
         $(".tile").off("click");
         stopTimer();
         var msg = "&lt;p&gt;Congratulations! You solved ";
         msg += "the puzzle in " + clicks;
         msg += " moves.&lt;/p&gt;";
         $("#timer").after(msg);
      }// end if
   }
});

function refresh() {
   location.reload();
}
               </pre>
               <!--<p>$(document).ready(function() {
                  <span class="indent-one">var seconds = 0,minutes = 0;</span>
                  <span class="indent-one">var time;</span>
                  <span class="indent-one">var clicks = 0;   <span class="comment">// This variable counts the number of clicks on the tiles.</span></span>
                  <span class="indent-one">var images = $("div.tile img").toArray();    <span class="comment">// Array contains all images from puzzle grid</span></span>
               </p>
               <p>
                  <span class="indent-one comment">// The following code shuffles the images on the page</span>
                  <span class="indent-one comment">// after a five (5) second delay.</span>
                  <span class="indent-one">setTimeout(function () {</span>
                     <span class="indent-two">var imgAry = shuff(images.slice()); <span class="comment">// call function to shuffle</span></span>
                     <span class="indent-two">for (var i = 0; i &lt; imgAry.length; i++) {</span>
                        <span class="indent-three">place_back($("div.tile")[i],imgAry[i]);   <span class="comment">// put images back on page</span></span>
                     <span class="indent-two">}</span>
               </p>
               <p>
                  <span class="indent-two comment">// The click event handler for the puzzle tiles.</span>
                  <span class="indent-two">$(".tile").on("click", function(event) {</span>
                  <span class="indent-three">clicks++;</span>
                  <span class="indent-three">if (clicks == 1) {</span>
                     <span class="indent-four">startTimer();  <span class="comment">// Start the timer on the first click</span></span>
                  <span class="indent-three">}</span>
               </p>
               <p>
                  <span class="indent-three comment">//get blank image & its index</span>
                  <span class="indent-three">blankImg = $("#blank");</span>
                  <span class="indent-three">var blankIndex = $("div.tile img").index(blankImg);</span>
                  <span class="indent-three">var blankTile = $("div.tile").get(blankIndex);</span>
               </p>
               <p>
                  <span class="indent-three comment">//get current image & its index</span>
                  <span class="indent-three">var curIndex = $("div.tile").index(this);</span>
                  <span class="indent-three">var curImg = $("div.tile img").get(curIndex);</span>
               </p>
               <p>
                  <span class="indent-three">var adjacent = testAdj(curIndex, blankIndex);</span>
               </p>
               <p>
                  <span class="indent-three">if (adjacent){</span>
                  <span class="indent-four">place_back($(this), blankImg);</span>
                  <span class="indent-four">place_back(blankTile, curImg);</span>
                  <span class="indent-three">} <span class="comment">// end if</span></span>
               </p>-->
            </div><!-- end container-->
         </div><!-- end grid -->
      </main>
      <footer>
         <p id="copyright">Website design, game programming, and logic by <a href="../../index.html">Marlon Castillo</a>.</p>
       </footer>
  </body>
</html>